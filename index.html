<!DOCTYPE html>
<html>

<head>
    <Style>
        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
        }

        .graph {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 10 auto;
        }
    </Style>
</head>

<body>
    <div class="graph">
        <canvas id="myCanvas"></canvas>
    </div>
    <script>

        draw()

        window.onresize = draw;

        function draw() {
            const canvas = document.getElementById("myCanvas");
            const ctx = canvas.getContext("2d");
            ctx.canvas.width = window.innerWidth;
            ctx.canvas.height = window.innerHeight;

            let margin = canvas.width / 13.6

            let xMax = canvas.width - margin;
            let xMin = margin;
            let xWidth = xMax - xMin;

            let yMax = canvas.height - margin;
            let yMin = margin;
            let yHeight = yMax - yMin;

            let hours = 24
            let xStep = xWidth / hours
            let temperature = [10, 45]
            let dTemp = (temperature[1] - temperature[0])
            let yStep = (canvas.height - margin) / dTemp


            let day = {
                name: "today",
                temperature: [24, 24, 22, 22, 22, 21, 20, 21, 25, 28, 31, 33, 34, 36, 36, 36, 36, 35, 34, 32, 29, 27, 25, 25],
                humidity: []
            }

            let maxTemp = Math.max(...day.temperature) + 10
            let minTemp = Math.min(...day.temperature) - 5

            function drawImageNight(x, y) {
                let img = new Image;
                img.src = "01n.svg";
                img.onload = function () {
                    ctx.drawImage(img, x, y, 30, 30); // Or at whatever offset you like
                };

            }

            function drawImageDay(x, y) {
                var img = new Image;
                img.src = "169367.png";
                img.onload = function () {
                    ctx.drawImage(img, x, y, 20, 20); // Or at whatever offset you like
                };
            }

            function round5(x) {
                return Math.ceil(x / 5) * 5;
            }

            let xAxis = []
            for (let i = 0; i <= 23; i++) {
                if (i < 10) {
                    xAxis.push("0" + i)
                } else {
                    xAxis.push(i + "")
                }
            }

            let yAxis = []
            for (let i = round5(maxTemp); i >= round5(minTemp); i--) {
                yAxis.push(i + "Â°C")
            }

            //plot x-grid lines 

            for (i = 0; i <= hours - 1; i++) {
                ctx.beginPath();
                let x = (i * xStep) + margin;
                ctx.fillText(xAxis[i], x - 5, canvas.height - margin + 15);

                ctx.moveTo(x, canvas.height - margin);
                ctx.lineTo(x, 0);
                ctx.strokeStyle = "lightgray";
                ctx.stroke();


            }

            //plot y-grid lines 


            for (i = 0; i <= dTemp; i++) {
                let y = (i * yStep);

                ctx.beginPath();
                if (i % 5 == 0) {
                    if (i != 0) {
                        ctx.fillText(yAxis[i], 0 + margin - 25, y + 2);
                        ctx.moveTo(0 + margin, y);
                        ctx.lineTo(canvas.width - margin - xStep, y);
                        ctx.strokeStyle = "grey";
                        ctx.stroke();
                    }

                } else {
                    ctx.moveTo(0 + margin, y);
                    ctx.lineTo(canvas.width - margin - xStep, y);
                    ctx.strokeStyle = "lightgray";
                    ctx.stroke();
                }


            }


            ctx.beginPath();



            // Plot data line  

            for (let i = 0; i < hours; i++) {
                let x = margin + i * xStep
                let futureX = x + xStep
                let y = canvas.height - margin - (day.temperature[i] - minTemp) * yStep
                let futureY = canvas.height - margin - (day.temperature[i + 1] - minTemp) * yStep
                ctx.moveTo(x, y);
                ctx.lineTo(futureX, futureY);


            }

            ctx.lineWidth = 2

            ctx.strokeStyle = "black";
            ctx.stroke();

            ctx.beginPath();

            // Plot Scatter points
            ctx.fillStyle = "red";
            for (let i = 0; i < hours; i++) {
                let x = margin + i * xStep
                let y = canvas.height - margin - (day.temperature[i] - minTemp) * yStep
                ctx.beginPath();
                ctx.ellipse(x, y, 3, 3, 0, 0, Math.PI * 2);
                ctx.fill();
                if (i == 0 || i == 23) {
                    continue
                }
                if (i >= 6 && i <= 18) {
                    drawImageDay(x - 20 / 2, y - margin)
                }
                else {
                    drawImageNight(x - 30 / 2, y - margin)
                }
            }

            ctx.beginPath();


            // Plot x title
            ctx.font = "15px Arial Black";
            ctx.fillStyle = "black";
            ctx.fillText("Hours", canvas.width / 2 - 25, canvas.height - margin / 2);

            ctx.font = "15px Arial Black";
            ctx.fillStyle = "black";


            // Plot Border around graph
            ctx.moveTo(margin, 2)
            ctx.lineTo(canvas.width - margin - xStep, 2)
            ctx.lineTo(canvas.width - margin - xStep, canvas.height - margin)
            ctx.lineTo(margin, canvas.height - margin)
            ctx.lineTo(margin, 2)


            //Plot y title

            ctx.translate(margin / 3, canvas.height / 2)
            ctx.rotate(-90 * Math.PI / 180)
            ctx.fillText("Temperature", 0, 0);
            ctx.rotate(90 * Math.PI / 180)
            ctx.setTransform(1, 0, 0, 1, 0, 0);


            ctx.strokeStyle = "black";
            ctx.stroke();


        }




    </script>

</body>

</html>